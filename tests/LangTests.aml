namespace Tests {

    class LangTests {
        import Am.Lang
        import Am.Tests
        
        static var testStaticValue: String = "static hello"
        
        test arrayLiterals() {
            var array: String[] = ["Hello", "World"]
            
            Assert.assertEquals("Hello", array[0])
            Assert.assertEquals("World", array[1])
            Assert.assertEquals(2UI, array.length())
        }
        
        test arrayIteration() {
            var myArray: Int[] = [1, 2, 3, 4, 5]
            var sum = 0
            
            var ac = myArray.asIterable()
            each(ac, item) {
                sum = sum + item
            }
            
            Assert.assertEquals(15, sum)
        }
        
        test intMaxValue() {
            var max = Int.maxValue
            
            // Int.maxValue should be 2147483647 for 32-bit signed integer
            Assert.assertTrue(max > 0)
        }
        
        test charToInt() {
            var c = 'a'
            var i = c.toInt()
            
            // ASCII value of 'a' is 97
            Assert.assertEquals(97, i)
        }
        
        test booleanOperations() {
            var trueVal = true
            var falseVal = false
            
            Assert.assertFalse(!trueVal)
            Assert.assertTrue(!falseVal)
        }
        
        test classRefForString() {
            var s = "hello"
            var cr = s.getClassRef()
            var className = cr.toString()
            
            Assert.assertTrue(className.getLength() > 0)
        }
        
        test classRefForInt() {
            var i = 20
            var cri = i.getClassRef()
            var className = cri.toString()
            
            Assert.assertTrue(className.getLength() > 0)
        }
        
        test staticFieldAccess() {
            var value = LangTests.testStaticValue
            
            Assert.assertEquals("static hello", value)
        }
        
        test parseLong() {
            var l1 = Long.parse("123")
            Assert.assertEquals(123L, l1)
            
            var l2 = Long.parse("-456")
            Assert.assertEquals(-456L, l2)
            
            var l3 = Long.parse("9223372036854775807")
            Assert.assertEquals(Long.maxValue, l3)
            
            var l4 = Long.parse("-9223372036854775808")
            Assert.assertEquals(Long.minValue, l4)
            
            var l5 = Long.parse("0")
            Assert.assertEquals(0L, l5)
        }
        
        test parseInt() {
            var i1 = Int.parse("123")
            Assert.assertEquals(123, i1)
            
            var i2 = Int.parse("-456")
            Assert.assertEquals(-456, i2)
            
            var i3 = Int.parse("2147483647")
            Assert.assertEquals(Int.maxValue, i3)
            
            var i4 = Int.parse("-2147483648")
            Assert.assertEquals(Int.minValue, i4)
            
            var i5 = Int.parse("0")
            Assert.assertEquals(0, i5)
        }
        
        test parseShort() {
            var s1 = Short.parse("123")
            Assert.assertEquals(123S, s1)
            
            var s2 = Short.parse("-456")
            Assert.assertEquals(-456S, s2)
            
            var s3 = Short.parse("32767")
            Assert.assertEquals(Short.maxValue, s3)
            
            var s4 = Short.parse("-32768")
            Assert.assertEquals(Short.minValue, s4)
            
            var s5 = Short.parse("0")
            Assert.assertEquals(0S, s5)
        }
        
        test parseByte() {
            var b1 = Byte.parse("123")
            Assert.assertEquals(123B, b1)
            
            var b2 = Byte.parse("-45")
            Assert.assertEquals(-45B, b2)
            
            var b3 = Byte.parse("127")
            Assert.assertEquals(Byte.maxValue, b3)
            
            var b4 = Byte.parse("-128")
            Assert.assertEquals(Byte.minValue, b4)
            
            var b5 = Byte.parse("0")
            Assert.assertEquals(0B, b5)
        }
        
        test parseULong() {
            var ul1 = ULong.parse("123")
            Assert.assertEquals(123UL, ul1)
            
            var ul2 = ULong.parse("18446744073709551615")
            Assert.assertEquals(ULong.maxValue, ul2)
            
            var ul3 = ULong.parse("0")
            Assert.assertEquals(ULong.minValue, ul3)
        }
        
        test parseUInt() {
            var ui1 = UInt.parse("123")
            Assert.assertEquals(123UI, ui1)
            
            var ui2 = UInt.parse("4294967295")
            Assert.assertEquals(UInt.maxValue, ui2)
            
            var ui3 = UInt.parse("0")
            Assert.assertEquals(UInt.minValue, ui3)
        }
        
        test parseUShort() {
            var us1 = UShort.parse("123")
            Assert.assertEquals(123US, us1)
            
            var us2 = UShort.parse("65535")
            Assert.assertEquals(UShort.maxValue, us2)
            
            var us3 = UShort.parse("0")
            Assert.assertEquals(UShort.minValue, us3)
        }
        
        test parseUByte() {
            var ub1 = UByte.parse("123")
            Assert.assertEquals(123UB, ub1)
            
            var ub2 = UByte.parse("255")
            Assert.assertEquals(UByte.maxValue, ub2)
            
            var ub3 = UByte.parse("0")
            Assert.assertEquals(UByte.minValue, ub3)
        }
        
        test floatBasicOperations() {
            var f1: Float = 3.14F
            var f2: Float = 2.71F
            
            // Test basic arithmetic
            var sum = f1 + f2
            Assert.assertTrue(sum > 5.8F && sum < 5.9F)
            
            var diff = f1 - f2
            Assert.assertTrue(diff > 0.4F && diff < 0.5F)
            
            var product = f1 * f2
            Assert.assertTrue(product > 8.5F && product < 8.6F)
            
            var quotient = f1 / f2
            Assert.assertTrue(quotient > 1.1F && quotient < 1.2F)
        }
        
        test floatConversions() {
            var f = 42.7F
            var i = 42
            var i2 = f.toInt()
            // Test conversions to integer types
            Assert.assertEquals(i, i2)
            Assert.assertEquals(42L, f.toLong())
            Assert.assertEquals(42S, f.toShort())
            Assert.assertEquals(42B, f.toByte())
            
            // Test conversion to double
            var d = f.toDouble()
            Assert.assertTrue(d > 42.69 && d < 42.71)
            
            // Test conversion to bool
            Assert.assertTrue(f.toBool())
            var zeroF: Float = 0.0F
            Assert.assertFalse(zeroF.toBool())
        }
        
        test floatStaticMethods() {
            var a = 5.5F
            var b = 3.2F
            
            // Test min/max
            Assert.assertEquals(3.2F, Float.min(a, b))
            Assert.assertEquals(5.5F, Float.max(a, b))
            
            // Test abs
            var negative = -7.8F
            Assert.assertEquals(7.8F, negative.abs())
            
            var positive = 7.8F
            Assert.assertEquals(7.8F, positive.abs())
        }
        
        test floatConstants() {
            // Test that maxValue and minValue are reasonable
            Assert.assertTrue(Float.maxValue > 1000000.0F)
            Assert.assertTrue(Float.minValue < -1000000.0F)
            Assert.assertTrue(Float.maxValue > 0.0F)
            Assert.assertTrue(Float.minValue < 0.0F)
        }
        
        test floatToString() {
            var f = 123.45F
            var str = f.toString()
            
            // Should contain the digits and decimal point
            Assert.assertTrue(str.getLength() > 3)
        }
        
        test doubleBasicOperations() {
            var d1 = 3.141592653589793
            var d2 = 2.718281828459045
            
            // Test basic arithmetic
            var sum = d1 + d2
            Assert.assertTrue(sum > 5.85 && sum < 5.87)
            
            var diff = d1 - d2
            Assert.assertTrue(diff > 0.42 && diff < 0.43)
            
            var product = d1 * d2
            Assert.assertTrue(product > 8.5 && product < 8.6)
            
            var quotient = d1 / d2
            Assert.assertTrue(quotient > 1.15 && quotient < 1.16)
        }
        
        test doubleConversions() {
            var d = 42.7
            
            // Test conversions to integer types
            Assert.assertEquals(42, d.toInt())
            Assert.assertEquals(42L, d.toLong())
            Assert.assertEquals(42S, d.toShort())
            Assert.assertEquals(42B, d.toByte())
            
            // Test conversion to float
            var f = d.toFloat()
            Assert.assertTrue(f > 42.69F && f < 42.71F)
            
            // Test conversion to bool
            Assert.assertTrue(d.toBool())
            var zeroD = 0.0
            Assert.assertFalse(zeroD.toBool())
        }
        
        test doubleStaticMethods() {
            var a = 5.5
            var b = 3.2
            
            // Test min/max
            Assert.assertEquals(3.2, Double.min(a, b))
            Assert.assertEquals(5.5, Double.max(a, b))
            
            // Test abs
            var negative = -7.8
            Assert.assertEquals(7.8, negative.abs())
            
            var positive = 7.8
            Assert.assertEquals(7.8, positive.abs())
        }
        
        test doubleConstants() {
            // Test that maxValue and minValue are reasonable
            Assert.assertTrue(Double.maxValue > 1000000000000.0)
            Assert.assertTrue(Double.minValue < -1000000000000.0)
            Assert.assertTrue(Double.maxValue > 0.0)
            Assert.assertTrue(Double.minValue < 0.0)
        }
        
        test doubleToString() {
            var d = 123.456789
            var str = d.toString()
            
            // Should contain the digits and decimal point
            Assert.assertTrue(str.getLength() > 3)
        }
        
        test floatDoubleComparison() {
            var f = 3.14F
            var d = 3.14
            
            // Test that float to double conversion works
            var fAsDouble = f.toDouble()
            Assert.assertTrue(fAsDouble > 3.13 && fAsDouble < 3.15)
            
            // Test that double to float conversion works
            var dAsFloat = d.toFloat()
            Assert.assertTrue(dAsFloat > 3.13F && dAsFloat < 3.15F)
        }
        
        test floatPrecision() {
            // Test that float arithmetic maintains reasonable precision
            var a = 1.0F
            var b = 3.0F
            var result = a / b
            
            // 1/3 should be approximately 0.333...
            Assert.assertTrue(result > 0.33F && result < 0.34F)
        }
        
        test doublePrecision() {
            // Test that double arithmetic maintains higher precision than float
            var a = 1.0
            var b = 3.0
            var result = a / b
            
            // 1/3 should be approximately 0.333...
            Assert.assertTrue(result > 0.333 && result < 0.334)
        }
    }
}
